<div class="py-2 text-white me-3" ngbDropdown>
  <myanili-icon
    [name]="unreadNotificationsCount ? 'bell-fill' : 'bell'"
    ngbDropdownToggle
  ></myanili-icon>
  <div
    class="dropdown-menu dropdown-menu-end py-0"
    ngbDropdownMenu
    aria-labelledby="notificationsDropdown"
    style="--bs-dropdown-min-width: 16rem"
  >
    <table class="table table-striped table-sm table-hover my-0" darkTable>
      <thead>
        @if (notificationsList.length && unreadNotificationsCount) {
          <tr (click)="markRead()">
            <th>
              <myanili-icon name="bell-slash"></myanili-icon>
            </th>
            <th colspan="2">Mark all as read</th>
          </tr>
        }
        @if (!notificationsList.length) {
          <tr>
            <td colspan="3" class="text-center">No recent notifications</td>
          </tr>
        }
      </thead>
      <tbody>
        @for (notification of notificationsList; track notification) {
          <tr (click)="callback(notification)">
            <td>
              @if (notification.platform == 'al') {
                <myanili-icon-anilist></myanili-icon-anilist>
              }
              @if (notification.platform == 'mal') {
                <myanili-icon-mal class="text-primary"></myanili-icon-mal>
              }
              @if (notification.platform == 'kitsu') {
                <myanili-icon-kitsu style="color: #e75e45"></myanili-icon-kitsu>
              }
            </td>
            <td [class]="{ 'fw-bold': notification.unread }" [innerHTML]="notification.text"></td>
            <td>
              {{ notification.createdAt | dateAgo: refresher }}
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>
