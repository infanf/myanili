<div class="modal-header">
  <div class="input-group">
    <input class="form-control" [(ngModel)]="title" type="search" />
    <button class="btn btn-primary" (click)="ngOnInit()">
      <myanili-icon name="search"></myanili-icon>
    </button>
  </div>
  <button
    type="button"
    class="btn-close"
    aria-describedby="modal-title"
    (click)="modal.dismiss()"
  ></button>
</div>
<table class="table table-striped table-hover" darkTable>
  <tbody>
    @for (node of nodes; track node) {
      <tr>
        <td [attr.colpan]="node.poster ? 1 : 2">
          @if (node.poster) {
            <img
              [src]="node.poster"
              class="float-start rounded me-2"
              width="120px"
              loading="lazy"
            />
          }
          <b>{{ node.title }}</b>
          @if (node.year) {
            <span class="ms-1">({{ node.year }})</span>
          }
          @if (node.url) {
            <a [href]="node.url" target="_blank">
              <myanili-icon class="ms-1" name="box-arrow-up-right" size="16"></myanili-icon>
            </a>
          }
          <div>
            @for (genre of node.genres; track genre) {
              <span class="badge rounded-pill bg-primary me-1">{{ genre }}</span>
            }
          </div>
          <div class="mt-1" [innerHTML]="node.description"></div>
        </td>
        <td>
          <myanili-icon
            class="cursor-pointer"
            size="20"
            name="link"
            (click)="modal.close(node.id)"
          ></myanili-icon>
        </td>
      </tr>
    }
    @if (!nodes.length) {
      <tr>
        @if (!searching) {
          <td colspan="2" class="text-center">
            <myanili-icon name="search"></myanili-icon>
            <span class="ms-1">No results</span>
          </td>
        }
        @if (searching) {
          <td colspan="2" class="text-center">
            <myanili-icon name="loading"></myanili-icon>
          </td>
        }
      </tr>
    }
  </tbody>
</table>
